/*
//SERVICE WORKER WORKAROUND
function asyncDelay(msToDelay) {
	return new Promise((success, failure) => {
		var completionTime = new Date().getTime() + msToDelay
		while (true) {
		  if (new Date().getTime() >= completionTime){
			success()
			break
		  }
		}
		failure()
	})
}

async function run() {
	for(let i = 0; i < 60; i++) {
		main();
		await asyncDelay(1000);
		extensionApi.alarms.create(`delay${i}`, { periodInMinutes:1 });
	}
}

extensionApi.alarms.onAlarm.addListener(() => {
	main();
})
*/